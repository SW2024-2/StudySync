<head>
  <style>
    /* å…¨ä½“ã®ä½™ç™½ã‚’ãƒªã‚»ãƒƒãƒˆ */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
    
    /* ã‚µã‚¤ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .site-icon {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      text-align: center; /* ä¸­å¤®æƒãˆ */
      background: white;
      z-index: 1000;
      padding: 10px 0;
      border-bottom: 1px solid #ddd;
    }
    
    .site-icon img {
      height: 50px; /* ã‚¢ã‚¤ã‚³ãƒ³ã®é«˜ã• */
    }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ† */
    .header {
      position: fixed;
      top: 70px; /* ã‚¢ã‚¤ã‚³ãƒ³ã®é«˜ã•åˆ†ä¸‹ã’ã‚‹ */
      left: 0;
      width: 100%;
      background: white;
      color: black;
      z-index: 999;
      text-align: center;
      padding: 10px 0;
      border-bottom: 1px solid #ccc;
    }
    
    .tab-menu {
      display: flex;
      justify-content: space-around;
    }
    
    .tab-link {
      padding: 10px 20px;
      color: black;
      text-decoration: none;
      font-weight: normal;
    }
    
    .tab-link.select {
      font-weight: bold;
      border-bottom: 2px solid black;
    }
    
    /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„éƒ¨åˆ† */
    .content {
      margin-top: 130px; /* ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ50pxï¼‰ + ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆ60pxï¼‰åˆ†ã‚’ç¢ºä¿ */
      padding: 20px;
      padding-bottom: 80px;
      flex: 1;
      overflow-y: auto;
    }
    
    /* ã‚¿ãƒ–ãƒ‘ãƒãƒ« */
    .tab-pane {
      display: none;
    }
    
    .tab-pane.active {
      display: block;
    }
    
    /* å„æŠ•ç¨¿ã®æ  */
    .study-log {
      border: 1px solid #ddd;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 5px;
      background-color: #fff;
    }
    
    /* å„æŠ•ç¨¿ã®ãƒ˜ãƒƒãƒ€ãƒ¼ */
    .study-log-header {
      display: flex;
      justify-content: space-between; /* å·¦å³ã«è¦ç´ ã‚’é…ç½® */
      align-items: center;
    }
    
    /* å„æŠ•ç¨¿ã®ãƒ•ãƒƒã‚¿ãƒ¼ */
    .study-log-footer {
      margin-top: 10px;
      display: flex;
      justify-content: space-between; /* å·¦å³ã«è¦ç´ ã‚’é…ç½® */
      align-items: center;
    }
    
    .left-actions {
      display: flex;
      gap: 15px; /* ã‚³ãƒ¡ãƒ³ãƒˆã¨ã„ã„ã­ã®é–“éš” */
      align-items: center;
    }
    
    .right-actions {
      display: flex;
      gap: 10px; /* ç·¨é›†ã¨å‰Šé™¤ã®é–“éš” */
    }
    
    .action-button {
      color: #007bff; /* é’è‰² */
      text-decoration: none;
      padding: 5px 10px;
      border: 1px solid transparent;
      border-radius: 3px;
      background-color: transparent;
      cursor: pointer;
      font-size: 12px;
      transition: background-color 0.2s, color 0.2s;
    }
    
    .action-button:hover {
      text-decoration: underline;
    }
    
    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    .footer-menu {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #f9f9f9;
      border-top: 1px solid #ccc;
      display: flex; /* ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹ãƒœãƒƒã‚¯ã‚¹ã‚’ä½¿ç”¨ */
      justify-content: space-around; /* å‡ç­‰ã«åˆ†å‰² */
      align-items: center; /* å‚ç›´æ–¹å‘ä¸­å¤®æƒãˆ */
      padding: 10px 0;
      box-sizing: border-box;
    }
    
    .footer-link {
      flex: 1; /* å„ãƒªãƒ³ã‚¯ã‚’å‡ç­‰ã«æ‹¡å¤§ */
      text-align: center; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®æƒãˆ */
      text-decoration: none;
      color: #007bff;
      font-size: 18px;
    }
    
  </style>
</head>

<div class="site-icon">
  <img src="<%= asset_path('icon.png') %>" alt="ã‚µã‚¤ãƒˆã‚¢ã‚¤ã‚³ãƒ³" class="icon-image">
</div>

<body>
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ† -->
  <div class="header">
    <div class="tab-menu">
      <a href="#" id="recommended-tab" class="tab-link select">é”æˆç›®æ¨™</a>
      <a href="#" id="following-tab" class="tab-link">ãƒ•ã‚©ãƒ­ãƒ¼</a>
    </div>
  </div>

  <div class="content">
    <!-- é”æˆç›®æ¨™ã®ã‚¿ãƒ– -->
    <div id="recommended" class="tab-pane active">
      <div class="study-logs">
        <% if @recommended_study_logs.present? %>
          <% @recommended_study_logs.each do |study_log| %>
            <div class="study-log">
              <div class="study-log-header">
                <!-- æŠ•ç¨¿è€…åã¨æŠ•ç¨¿æ™‚é–“ã‚’æ¨ªä¸¦ã³ -->
                <div>
                  <span class="user-name"><%= study_log.user.name %></span>
                  <span class="timestamp">&emsp;&emsp;<%= time_ago_in_words(study_log.created_at) %>å‰</span>
                </div>
                
                <!-- å‰Šé™¤ãƒ»ç·¨é›†ãƒœã‚¿ãƒ³ã‚’å³ç«¯ã«é…ç½® -->
                <% if study_log.user == current_user %>
                  <div class="right-actions">
                    <%= form_tag study_log_path(study_log), method: :delete, data: { confirm: 'æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ' }, class: 'delete-form' do %>
                      <%= link_to 'å‰Šé™¤', '#', class: 'action-button delete-link', onclick: 'this.closest("form").submit(); return false;' %>
                    <% end %>
                    <%= link_to 'ç·¨é›†', edit_study_log_path(study_log), class: 'action-button edit-link' %>
                  </div>
                <% end %>
              </div>
              <div class="study-log-body">
                <h3 class="subject"><%= study_log.subject.present? ? study_log.subject.name : 'ç§‘ç›®ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“' %></h3>
                <h3 class="study-time"><%= "#{(study_log.study_time / 60).floor}æ™‚é–“ #{study_log.study_time % 60}åˆ†" %></h3>
              </div>
              <div class="study-log-footer">
                <div class="left-actions">
                  <%= link_to 'ğŸ’¬ã‚³ãƒ¡ãƒ³ãƒˆ', study_log_comments_path(study_log), class: 'comment-link' %>
                  <%= form_with url: study_log_like_path(study_log), method: study_log.liked_by?(current_user) ? :delete : :post, local: true do %>
                    <a href="#" onclick="this.closest('form').submit(); return false;"
                       class="like-icon"
                       style="<%= study_log.liked_by?(current_user) ? 'color: red;' : '' %>">
                      <%= study_log.liked_by?(current_user) ? 'â¤ï¸ ã„ã„ã­' : 'ğŸ‘ ã„ã„ã­' %>
                    </a>
                  <% end %>
                  <span class="like-count">(<%= study_log.likes.count %>)</span>
                </div>
              </div>
            </div>
          <% end %>
        <% else %>
          <center>æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</center>
        <% end %>
      </div>
    </div>

    <!-- ãƒ•ã‚©ãƒ­ãƒ¼ã®ã‚¿ãƒ– -->
    <div id="following" class="tab-pane">
      <div class="study-logs">
        <% if @following_study_logs.present? %>
          <% @following_study_logs.each do |study_log| %>
            <div class="study-log">
              <div class="study-log-header">
                <!-- æŠ•ç¨¿è€…åã¨æŠ•ç¨¿æ™‚é–“ã‚’æ¨ªä¸¦ã³ -->
                <div>
                  <span class="user-name"><%= study_log.user.name %></span>
                  <span class="timestamp">&emsp;&emsp;<%= time_ago_in_words(study_log.created_at) %>å‰</span>
                </div>
                
                <!-- å‰Šé™¤ãƒ»ç·¨é›†ãƒœã‚¿ãƒ³ã‚’å³ç«¯ã«é…ç½® -->
                <% if study_log.user == current_user %>
                  <div class="right-actions">
                    <%= form_tag study_log_path(study_log), method: :delete, data: { confirm: 'æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ' }, class: 'delete-form' do %>
                      <%= link_to 'å‰Šé™¤', '#', class: 'action-button delete-link', onclick: 'this.closest("form").submit(); return false;' %>
                    <% end %>
                    <%= link_to 'ç·¨é›†', edit_study_log_path(study_log), class: 'action-button edit-link' %>
                  </div>
                <% end %>
              </div>
              <div class="study-log-body">
                <h3 class="subject"><%= study_log.subject.present? ? study_log.subject.name : 'ç§‘ç›®ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“' %></h3>
                <h3 class="study-time"><%= "#{(study_log.study_time / 60).floor}æ™‚é–“ #{study_log.study_time % 60}åˆ†" %></h3>
              </div>
              <div class="study-log-footer">
                <div class="left-actions">
                  <%= link_to 'ğŸ’¬ã‚³ãƒ¡ãƒ³ãƒˆ', study_log_comments_path(study_log), class: 'comment-link' %>
                  <%= form_with url: study_log_like_path(study_log), method: study_log.liked_by?(current_user) ? :delete : :post, local: true do %>
                    <a href="#" onclick="this.closest('form').submit(); return false;"
                       class="like-icon"
                       style="<%= study_log.liked_by?(current_user) ? 'color: red;' : '' %>">
                      <%= study_log.liked_by?(current_user) ? 'â¤ï¸ ã„ã„ã­' : 'ğŸ‘ ã„ã„ã­' %>
                    </a>
                  <% end %>
                  <span class="like-count">(<%= study_log.likes.count %>)</span>
                </div>
              </div>
            </div>
          <% end %>
        <% else %>
          <center>ãƒ•ãƒ¬ãƒ³ãƒ‰ã®è¨˜éŒ²ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</center>
        <% end %>
      </div>
    </div>
  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
  <div class="footer-menu">
    <%= link_to 'è¨˜éŒ²ã™ã‚‹', new_study_log_path, class: 'footer-link' %>
    <%= link_to 'ãƒ¬ãƒãƒ¼ãƒˆã‚’è¦‹ã‚‹', reports_path, class: 'footer-link' %>
    <%= link_to 'ãƒ•ãƒ¬ãƒ³ãƒ‰ä¸€è¦§', friendships_path, class: 'footer-link' %>
    <%= link_to 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ', logout_path, class: 'footer-link' %>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const tabs = document.querySelectorAll(".tab-link");
      const panes = document.querySelectorAll(".tab-pane");

      tabs.forEach(tab => {
        tab.addEventListener("click", function (e) {
          e.preventDefault();

          // ã‚¿ãƒ–ã®é¸æŠçŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆ
          tabs.forEach(t => t.classList.remove("select"));
          this.classList.add("select");

          // ãƒ‘ãƒãƒ«ã®è¡¨ç¤ºçŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆ
          panes.forEach(pane => pane.classList.remove("active"));
          const targetId = this.id.replace("-tab", "");
          document.getElementById(targetId).classList.add("active");
        });
      });
    });
  </script>
</body>